(this.webpackJsonpmoments=this.webpackJsonpmoments||[]).push([[0],{102:function(e,a,t){"use strict";t.r(a);var c=t(0),s=t.n(c),n=t(29),r=t.n(n),o=(t(72),t(20)),i=t.n(o),l=t(17),j=t.n(l),d=t(105),h=t(106),u=t(48),b=t(12),m=t(60),x=t(14),p=t(9),O=t(15),g=t.n(O);g.a.defaults.baseURL="/api",g.a.defaults.headers.post["Content-Type"]="multipart/form-data",g.a.defaults.withCredentials=!0;const v=g.a.create(),_=g.a.create();var f=t(7),w=t(1);const y=Object(c.createContext)(),N=Object(c.createContext)(),C=()=>Object(c.useContext)(y),S=e=>{let{children:a}=e;const[t,s]=Object(c.useState)(null),n=Object(f.f)();return Object(c.useEffect)((()=>{(async()=>{try{const{data:e}=await _.get("dj-rest-auth/user/");s(e)}catch(e){console.log(e)}})()}),[]),Object(c.useMemo)((()=>{v.interceptors.request.use((async e=>{try{await g.a.post("/dj-rest-auth/token/refresh/")}catch(a){return s((e=>(e&&n.push("/signin"),null))),e}return e}),(e=>Promise.reject(e))),_.interceptors.response.use((e=>e),(async e=>{var a;if(401===(null===(a=e.response)||void 0===a?void 0:a.status)){try{await g.a.post("/dj-rest-auth/token/refresh/")}catch(e){s((e=>(e&&n.push("/signin"),null)))}return g()(e.config)}return Promise.reject(e)}))}),[n]),Object(w.jsx)(y.Provider,{value:t,children:Object(w.jsx)(N.Provider,{value:s,children:a})})};var I=t(59),A=t.n(I);var P=e=>{let{src:a,height:t=45}=e;const c=C();return Object(w.jsx)("span",{children:Object(w.jsx)("img",{className:A.a.Avatar,src:a,height:t,width:t,alt:"".concat(null===c||void 0===c?void 0:c.username,"' avatar")})})};var k=()=>{const e=C(),a=Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(d.a,{className:"m-auto",children:[Object(w.jsx)(p.c,{className:j.a.NavLink,activeClassName:j.a.Active,to:"/signup",children:Object(w.jsx)(b.a,{icon:x.i,size:"2xl"})}),"Sign Up!"]}),Object(w.jsxs)(d.a,{className:"m-auto",children:[Object(w.jsx)(p.c,{className:j.a.NavLink,activeClassName:j.a.Active,to:"/signin",children:Object(w.jsx)(b.a,{icon:x.f,size:"2xl"})}),"Login"]})]}),t=Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(d.a,{className:"mr-auto",children:Object(w.jsx)(p.c,{className:j.a.NavLink,activeClassName:j.a.Active,to:"/popular",children:Object(w.jsx)(b.a,{icon:x.h,size:"2xl"})})}),Object(w.jsx)(d.a,{className:"mr-auto",children:Object(w.jsx)(p.c,{className:j.a.NavLink,activeClassName:j.a.Active,to:"/feed",children:Object(w.jsx)(b.a,{icon:x.e,size:"2xl"})})}),Object(w.jsx)(d.a,{children:Object(w.jsx)(p.c,{className:j.a.NavLink,to:"/profile/".concat(null===e||void 0===e?void 0:e.profile_id),children:Object(w.jsx)(P,{src:null===e||void 0===e?void 0:e.profile_image,height:40})})}),Object(w.jsx)(d.a,{className:"ml-auto",children:Object(w.jsx)(p.c,{className:j.a.NavLink,activeClassName:j.a.Active,to:"/placeholder",children:Object(w.jsx)(b.a,{icon:x.g,size:"2xl"})})}),Object(w.jsx)(d.a,{className:"ml-auto",children:Object(w.jsx)(p.c,{className:j.a.NavLink,to:"/spotify-search",children:Object(w.jsx)(b.a,{icon:m.a,style:{color:"#1db954"},size:"2xl"})})})]});return Object(w.jsx)(h.a,{className:j.a.CustomBackground,expand:"md",fixed:"bottom",children:Object(w.jsx)(u.a,{children:e?t:a})})},L=t(13),F=t.n(L),B=t(21),U=t.n(B),z=t(63),R=t(34),E=t(26),H=t(42),T=t(64),W=t(65);var D=()=>{var e,a,t,s;const[n,r]=Object(c.useState)({username:"",password1:"",password2:""}),{username:o,password1:l,password2:j}=n,[d,h]=Object(c.useState)({}),b=Object(f.f)(),m=e=>{r({...n,[e.target.name]:e.target.value})};return Object(w.jsxs)(z.a,{className:F.a.Row,children:[Object(w.jsxs)(R.a,{className:"my-auto py-2 p-md-2",md:6,children:[Object(w.jsxs)(u.a,{className:"".concat(i.a.Content," p-4 "),children:[Object(w.jsx)("h1",{className:F.a.Header,children:"sign up"}),Object(w.jsxs)(E.a,{onSubmit:async e=>{e.preventDefault();try{await g.a.post("/dj-rest-auth/registration/",n),b.push("/signin")}catch(t){var a;h(null===(a=t.response)||void 0===a?void 0:a.data)}},children:[Object(w.jsxs)(E.a.Group,{controlId:"username",children:[Object(w.jsx)(E.a.Label,{className:"d-none",children:"username"}),Object(w.jsx)(E.a.Control,{className:F.a.Input,type:"text",placeholder:"Username",name:"username",value:o,onChange:m})]}),null===(e=d.username)||void 0===e?void 0:e.map(((e,a)=>Object(w.jsx)(H.a,{variant:"warning",children:e},a))),Object(w.jsxs)(E.a.Group,{controlId:"password1",children:[Object(w.jsx)(E.a.Label,{className:"d-none",children:"Password"}),Object(w.jsx)(E.a.Control,{className:F.a.Input,type:"password",placeholder:"Password",name:"password1",value:l,onChange:m})]}),null===(a=d.password1)||void 0===a?void 0:a.map(((e,a)=>Object(w.jsx)(H.a,{variant:"warning",children:e},a))),Object(w.jsxs)(E.a.Group,{controlId:"password2",children:[Object(w.jsx)(E.a.Label,{className:"d-none",children:"Confirm password"}),Object(w.jsx)(E.a.Control,{className:F.a.Input,type:"password",placeholder:"Confirm password",name:"password2",value:j,onChange:m})]}),null===(t=d.password2)||void 0===t?void 0:t.map(((e,a)=>Object(w.jsx)(H.a,{variant:"warning",children:e},a))),Object(w.jsx)(T.a,{className:"".concat(U.a.Button," ").concat(U.a.Wide," ").concat(U.a.Bright),type:"submit",children:"Sign up"}),null===(s=d.non_field_errors)||void 0===s?void 0:s.map(((e,a)=>Object(w.jsx)(H.a,{variant:"warning",className:"mt-3",children:e},a)))]})]}),Object(w.jsx)(u.a,{className:"mt-3 ".concat(i.a.Content),children:Object(w.jsxs)(p.b,{className:F.a.Link,to:"/signin",children:["Already have an account? ",Object(w.jsx)("span",{children:"Sign in"})]})})]}),Object(w.jsx)(R.a,{md:6,className:"my-auto d-none d-md-block p-2 ".concat(F.a.SignUpCol),children:Object(w.jsx)(W.a,{className:"".concat(i.a.FillerImage),src:"https://codeinstitute.s3.amazonaws.com/AdvancedReact/hero2.jpg"})})]})};var M=function(){var e,a,t;const s=Object(c.useContext)(N),[n,r]=Object(c.useState)({username:"",password:""}),{username:o,password:l}=n,[j,d]=Object(c.useState)({}),h=Object(f.f)(),b=e=>{r({...n,[e.target.name]:e.target.value})};return Object(w.jsxs)(z.a,{className:F.a.Row,children:[Object(w.jsxs)(R.a,{className:"my-auto p-0 p-md-2",md:6,children:[Object(w.jsxs)(u.a,{className:"".concat(i.a.Content," p-4 "),children:[Object(w.jsx)("h1",{className:F.a.Header,children:"sign in"}),Object(w.jsxs)(E.a,{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await g.a.post("/dj-rest-auth/login/",n);s(e.user),h.goBack()}catch(t){var a;d(null===(a=t.response)||void 0===a?void 0:a.data)}},children:[Object(w.jsxs)(E.a.Group,{controlId:"username",children:[Object(w.jsx)(E.a.Label,{className:"d-none",children:"Username"}),Object(w.jsx)(E.a.Control,{type:"text",placeholder:"Username",name:"username",className:F.a.Input,value:o,onChange:b})]}),null===(e=j.username)||void 0===e?void 0:e.map(((e,a)=>Object(w.jsx)(H.a,{variant:"warning",children:e},a))),Object(w.jsxs)(E.a.Group,{controlId:"password",children:[Object(w.jsx)(E.a.Label,{className:"d-none",children:"Password"}),Object(w.jsx)(E.a.Control,{type:"password",placeholder:"Password",name:"password",className:F.a.Input,value:l,onChange:b})]}),null===(a=j.password)||void 0===a?void 0:a.map(((e,a)=>Object(w.jsx)(H.a,{variant:"warning",children:e},a))),Object(w.jsx)(T.a,{className:"".concat(U.a.Button," ").concat(U.a.Wide," ").concat(U.a.Bright),type:"submit",children:"Sign in"}),null===(t=j.non_field_errors)||void 0===t?void 0:t.map(((e,a)=>Object(w.jsx)(H.a,{variant:"warning",className:"mt-3",children:e},a)))]})]}),Object(w.jsx)(u.a,{className:"mt-3 ".concat(i.a.Content),children:Object(w.jsxs)(p.b,{className:F.a.Link,to:"/signup",children:["Don't have an account? ",Object(w.jsx)("span",{children:"Sign up now!"})]})})]}),Object(w.jsx)(R.a,{md:6,className:"my-auto d-none d-md-block p-2 ".concat(F.a.SignInCol),children:Object(w.jsx)(W.a,{className:"".concat(i.a.FillerImage),src:"https://codeinstitute.s3.amazonaws.com/AdvancedReact/hero.jpg"})})]})};const q="51c949a050b74ceba5688d10a1c7f5f1",G="http://localhost:3000/spotify-search",Z=(e=>{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+a[t%62]),"")})(64),J=async()=>{const e=await(async e=>{const a=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",a)})(Z);return a=e,btoa(String.fromCharCode(...new Uint8Array(a))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var a},K=()=>(Object(c.useEffect)((()=>{let e=new URLSearchParams(window.location.search).get("code");e&&(window.localStorage.setItem("code",e),(async e=>{let a=localStorage.getItem("code_verifier");const t={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:q,grant_type:"authorization_code",code:e,redirect_uri:G,code_verifier:a})},c=await fetch("https://accounts.spotify.com/api/token",t),s=await c.json();localStorage.setItem("access_token",s.access_token)})(e))}),[]),{handleAuthentication:async()=>{await(async()=>{const e=new URL("https://accounts.spotify.com/authorize");window.localStorage.setItem("code_verifier",Z);const a=await J(),t={response_type:"code",client_id:q,scope:"user-read-private user-read-email streaming",code_challenge_method:"S256",code_challenge:a,redirect_uri:G};e.search=new URLSearchParams(t).toString(),window.location.href=e.toString()})()}});async function Q(){let e=localStorage.getItem("access_token");const a=await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+e}}),t=await a.json();console.log(t)}async function V(){let e=localStorage.getItem("access_token");const a=await fetch("https://api.spotify.com/v1/search?q=remaster%2520track%3ADoxy%2520artist%3AMiles%2520Davis&type=album",{headers:{Authorization:"Bearer "+e}}),t=await a.json();console.log(t)}var X=t(104);var Y=function(e){let{onSearch:a}=e;const[t,s]=Object(c.useState)("");return Object(w.jsx)(E.a,{onSubmit:async e=>{e.preventDefault(),a(t)},children:Object(w.jsx)(E.a.Group,{controlId:"searchForm",children:Object(w.jsxs)(X.a,{children:[Object(w.jsx)(E.a.Control,{type:"text",placeholder:"Search Spotify",onChange:e=>s(e.target.value)}),Object(w.jsx)(X.a.Append,{children:Object(w.jsx)(T.a,{type:"submit",className:U.a.Button,children:Object(w.jsx)(b.a,{icon:x.d,style:{color:"#3d3d3d"},size:"lg"})})})]})})})},$=t(66),ee=t.n($);const ae=Object(c.createContext)(),te=Object(c.createContext)(),ce=e=>{let{children:a}=e;const[t,s]=Object(c.useState)("spotify:album:1VrravzsxruIeQf1cuE6zB");return Object(w.jsx)(ae.Provider,{value:t,children:Object(w.jsx)(te.Provider,{value:s,children:a})})};var se=e=>{let{playlist:a}=e;const{added_on:t,average_rating:s,id:n,iframe_uri:r,image:o,is_owner:i,owner:l,rating_id:j,ratings_count:d,title:h,urls:u}=a,b=Object(c.useContext)(te);return Object(w.jsxs)(T.a,{variant:"link",onClick:()=>{b(r)},children:[Object(w.jsx)("img",{src:o||"https://res.cloudinary.com/dxgzepuov/image/upload/v1702896303/default_post_uq5gxz.jpg",className:ee.a.Image,alt:"".concat(h,"'s cover art")}),Object(w.jsx)("h5",{className:"mt-0",children:h})]})};var ne=()=>{const[e,a]=Object(c.useState)(),{handleAuthentication:t}=K();return Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Spotify Page"}),Object(w.jsx)(Y,{onSearch:async e=>{try{const t=await fetch("https://api.spotify.com/v1/search?q=".concat(e,"&type=artist"),{headers:{Authorization:"Bearer "+localStorage.getItem("access_token")}}),c=await t.json();a(c.artists.items),console.log(c)}catch(t){console.log(t)}}}),Object(w.jsx)(T.a,{onClick:t,children:"Authenticate"}),Object(w.jsx)(T.a,{onClick:Q,children:"get profile"}),Object(w.jsx)(T.a,{onClick:V,children:"searchForItem"}),Object(w.jsx)(u.a,{children:Object(w.jsx)(z.a,{children:null===e||void 0===e?void 0:e.map((e=>{var a;return Object(w.jsx)(se,{title:e.name,image:null===(a=e.images[0])||void 0===a?void 0:a.url,url:e.external_urls.spotify,iframe_uri:e.uri},e.id)}))})})]})},re=t(32),oe=t.n(re),ie=t(107),le=t(108);var je=function(){const e=Object(c.useRef)(),a=Object(c.useContext)(ae),[t,s]=Object(c.useState)(null);return Object(c.useEffect)((()=>{const t=document.createElement("script");t.src="https://open.spotify.com/embed/iframe-api/v1",t.async=!0,document.body.appendChild(t),window.onSpotifyIframeApiReady=t=>{const c={width:"100%",height:"352px",uri:a};t.createController(e.current,c,(e=>{s(e)}))}}),[]),Object(c.useEffect)((()=>{t&&t.loadUri(a)}),[a,t]),Object(w.jsx)("div",{ref:e})};var de=function(){return Object(w.jsx)(ie.a,{className:oe.a.AccordionPosition,children:Object(w.jsxs)(le.a,{className:oe.a.Card,children:[Object(w.jsx)(le.a.Header,{className:oe.a.Header,children:Object(w.jsx)(ie.a.Toggle,{as:T.a,variant:"link",eventKey:"0",className:oe.a.PaddingReset,children:Object(w.jsx)(b.a,{icon:x.b})})}),Object(w.jsx)(ie.a.Collapse,{eventKey:"0",children:Object(w.jsx)(le.a.Body,{className:oe.a.PaddingReset,children:Object(w.jsx)(je,{})})})]})})},he=t(33),ue=t.n(he),be=t(36),me=t.n(be);var xe=()=>Object(w.jsx)("div",{children:Object(w.jsx)(b.a,{icon:x.c,size:"2xl",spin:!0})});var pe=()=>{const{id:e}=Object(f.g)(),[a,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{n(!1),(async()=>{try{const{data:a}=await v.get("profiles/".concat(e));t(a),n(!0)}catch(a){console.log(a)}})()}),[e]),s?Object(w.jsxs)(u.a,{className:ue.a.ProfileContainer,style:{backgroundImage:"url(".concat(a.background,")")},children:[Object(w.jsx)(u.a,{children:Object(w.jsxs)(z.a,{children:[Object(w.jsx)(R.a,{xs:3,children:Object(w.jsx)(b.a,{icon:x.a,size:"xl",className:ue.a.FontAwesomeIcon})}),Object(w.jsx)(R.a,{xs:6,children:Object(w.jsx)("h2",{children:a.owner})}),Object(w.jsx)(R.a,{xs:3,children:"Settings"})]})}),Object(w.jsx)(u.a,{className:ue.a.StatsContainer,children:Object(w.jsxs)(z.a,{children:[Object(w.jsx)(R.a,{xs:3,children:Object(w.jsx)(P,{src:a.image,height:100})}),Object(w.jsx)(R.a,{xs:9,children:Object(w.jsxs)(z.a,{children:[Object(w.jsxs)(R.a,{xs:4,children:[Object(w.jsx)("h3",{children:a.followers_count}),Object(w.jsx)("p",{children:"Followers"})]}),Object(w.jsxs)(R.a,{xs:4,children:[Object(w.jsx)("h3",{children:a.following_count}),Object(w.jsx)("p",{children:"Following"})]}),Object(w.jsxs)(R.a,{xs:4,children:[Object(w.jsx)("h3",{children:a.playlists_count}),Object(w.jsx)("p",{children:"Playlists"})]})]})})]})})]}):Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(u.a,{className:ue.a.ProfileContainer,children:[Object(w.jsx)(u.a,{children:Object(w.jsx)(xe,{className:me.a.Centered})}),Object(w.jsx)(u.a,{className:ue.a.StatsContainer,children:Object(w.jsx)(xe,{className:me.a.Centered})})]})})};var Oe=()=>Object(w.jsx)(pe,{}),ge=t(67),ve=t.n(ge);var _e=()=>{C();const[e,a]=Object(c.useState)([]),[t,s]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{s(!1),(async()=>{try{const{data:e}=await v.get("playlists/");a(e.results),console.log(e.results),s(!0)}catch(e){console.log(e)}})()}),[]),t?Object(w.jsx)(z.a,{children:e.map((e=>Object(w.jsx)(R.a,{xs:12,md:4,lg:3,className:ve.a.Column,children:Object(w.jsx)(se,{playlist:e},e.id)})))}):Object(w.jsx)(xe,{className:me.a.Centered})};var fe=function(){const e=C();return null===e||void 0===e||e.username,Object(w.jsxs)("div",{className:i.a.App,children:[Object(w.jsx)(k,{}),Object(w.jsx)(de,{}),Object(w.jsxs)(f.c,{children:[Object(w.jsx)(f.a,{exact:!0,path:"/",render:()=>Object(w.jsx)("h1",{children:"Home Page"})}),Object(w.jsx)(f.a,{exact:!0,path:"/signin",render:()=>Object(w.jsx)(M,{})}),Object(w.jsx)(f.a,{exact:!0,path:"/signup",render:()=>Object(w.jsx)(D,{})}),Object(w.jsx)(f.a,{exact:!0,path:"/profile/:id",render:()=>Object(w.jsx)(Oe,{})}),Object(w.jsx)(f.a,{exact:!0,path:"/popular",render:()=>Object(w.jsx)(_e,{})}),Object(w.jsx)(f.a,{exact:!0,path:"/feed",render:()=>Object(w.jsx)("h1",{children:"Followed Users"})}),Object(w.jsx)(f.a,{exact:!0,path:"/spotify-search",render:()=>Object(w.jsx)(ne,{})}),Object(w.jsx)(f.a,{exact:!0,path:"/placeholder",render:()=>Object(w.jsx)("h1",{children:"Placeholder"})}),Object(w.jsx)(f.a,{render:()=>Object(w.jsx)("h1",{children:"Page Not Found!"})})]})]})};var we=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,109)).then((a=>{let{getCLS:t,getFID:c,getFCP:s,getLCP:n,getTTFB:r}=a;t(e),c(e),s(e),n(e),r(e)}))};r.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(S,{children:Object(w.jsx)(ce,{children:Object(w.jsx)(p.a,{children:Object(w.jsx)(fe,{})})})})}),document.getElementById("root")),we()},13:function(e,a,t){e.exports={Row:"SignInUpForm_Row__3PbVy",Input:"SignInUpForm_Input__3xaLZ",Header:"SignInUpForm_Header__3joQJ",Link:"SignInUpForm_Link__1BeMm",SignUpCol:"SignInUpForm_SignUpCol__28o4y",SignInCol:"SignInUpForm_SignInCol__3ImPK"}},17:function(e,a,t){e.exports={CustomBackground:"NavBar_CustomBackground__3zgb5",NavLink:"NavBar_NavLink__34ons",Active:"NavBar_Active__3PBZb"}},20:function(e,a,t){e.exports={App:"App_App__16ZpL",Content:"App_Content__ZaMNr",FillerImage:"App_FillerImage__2ob-g"}},21:function(e,a,t){e.exports={Button:"Button_Button__27i9m",Wide:"Button_Wide__2ScDr"}},32:function(e,a,t){e.exports={AccordionPosition:"AccordionWindow_AccordionPosition__3Pg_2",Header:"AccordionWindow_Header__3EVT_",Card:"AccordionWindow_Card__RFCw5",PaddingReset:"AccordionWindow_PaddingReset__RMqnf"}},33:function(e,a,t){e.exports={ProfileContainer:"Profile_ProfileContainer__1MhJH",FontAwesomeIcon:"Profile_FontAwesomeIcon__1XfKb",StatsContainer:"Profile_StatsContainer__1jyTN"}},36:function(e,a,t){e.exports={Centered:"LoadingSpinner_Centered__2UoRO"}},59:function(e,a,t){e.exports={Avatar:"Avatar_Avatar__196lW"}},66:function(e,a,t){e.exports={Image:"Playlist_Image__2QZQC"}},67:function(e,a,t){e.exports={Column:"PlaylistsPage_Column__3Mq96"}},72:function(e,a,t){}},[[102,1,2]]]);
//# sourceMappingURL=main.8da938b5.chunk.js.map