(this.webpackJsonpmoments=this.webpackJsonpmoments||[]).push([[0],{125:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(29),o=a.n(c),r=(a(93),a(25)),i=a.n(r),l=a(20),d=a.n(l),j=a(136),u=a(137),h=a(128),b=a(12),m=a(82),x=a(14),O=a(13),p=a(9),g=a.n(p);g.a.defaults.baseURL="/api",g.a.defaults.headers.post["Content-Type"]="multipart/form-data",g.a.defaults.withCredentials=!0;const _=g.a.create(),v=g.a.create();var f=a(10),w=a(79);const y=()=>{localStorage.removeItem("refreshTokenTimestamp")};var C=a(1);const N=Object(s.createContext)(),S=Object(s.createContext)(),P=()=>Object(s.useContext)(N),I=()=>Object(s.useContext)(S),k=e=>{let{children:t}=e;const[a,n]=Object(s.useState)(null),c=Object(f.f)();return Object(s.useEffect)((()=>{(async()=>{const e=g.a.CancelToken.source();try{const{data:t}=await v.get("dj-rest-auth/user/",{cancelToken:e.token});n(t)}catch(t){g.a.isCancel(t)?console.log("Request canceled",t.message):console.log(t)}})()}),[]),Object(s.useMemo)((()=>{_.interceptors.request.use((async e=>{if(localStorage.getItem("refreshTokenTimestamp"))try{await g.a.post("/dj-rest-auth/token/refresh/")}catch(t){return n((e=>(e&&c.push("/signin"),null))),y(),e}return e}),(e=>Promise.reject(e))),v.interceptors.response.use((e=>e),(async e=>{var t;if(401===(null===(t=e.response)||void 0===t?void 0:t.status)){try{await g.a.post("/dj-rest-auth/token/refresh/")}catch(e){n((e=>(e&&c.push("/signin"),null))),y()}return g()(e.config)}return Promise.reject(e)}))}),[c]),Object(C.jsx)(N.Provider,{value:a,children:Object(C.jsx)(S.Provider,{value:n,children:t})})};var A=a(81),B=a.n(A);var F=e=>{let{src:t,height:a=45}=e;const s=P();return Object(C.jsx)("span",{children:Object(C.jsx)("img",{className:B.a.Avatar,src:t,height:a,width:a,alt:"".concat(null===s||void 0===s?void 0:s.username,"' avatar")})})};var R=()=>{const e=P(),t=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(j.a,{className:"m-auto",children:[Object(C.jsx)(O.c,{className:d.a.NavLink,activeClassName:d.a.Active,to:"/signup",children:Object(C.jsx)(b.a,{icon:x.k,size:"2xl"})}),"Sign Up!"]}),Object(C.jsxs)(j.a,{className:"m-auto",children:[Object(C.jsx)(O.c,{className:d.a.NavLink,activeClassName:d.a.Active,to:"/signin",children:Object(C.jsx)(b.a,{icon:x.g,size:"2xl"})}),"Login"]})]}),a=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(j.a,{className:"mr-auto",children:Object(C.jsx)(O.c,{className:d.a.NavLink,activeClassName:d.a.Active,to:"/popular",children:Object(C.jsx)(b.a,{icon:x.j,size:"2xl"})})}),Object(C.jsx)(j.a,{className:"mr-auto",children:Object(C.jsx)(O.c,{className:d.a.NavLink,activeClassName:d.a.Active,to:"/feed",children:Object(C.jsx)(b.a,{icon:x.f,size:"2xl"})})}),Object(C.jsx)(j.a,{children:Object(C.jsx)(O.c,{className:d.a.NavLink,to:"/profile/".concat(null===e||void 0===e?void 0:e.profile_id),children:Object(C.jsx)(F,{src:null===e||void 0===e?void 0:e.profile_image,height:40})})}),Object(C.jsx)(j.a,{className:"ml-auto",children:Object(C.jsx)(O.c,{className:d.a.NavLink,activeClassName:d.a.Active,to:"/placeholder",children:Object(C.jsx)(b.a,{icon:x.h,size:"2xl"})})}),Object(C.jsx)(j.a,{className:"ml-auto",children:Object(C.jsx)(O.c,{className:d.a.NavLink,to:"/spotify-search",children:Object(C.jsx)(b.a,{icon:m.a,style:{color:"#1db954"},size:"2xl"})})})]});return Object(C.jsx)(u.a,{className:d.a.CustomBackground,expand:"md",fixed:"bottom",children:Object(C.jsx)(h.a,{children:e?a:t})})};const L=()=>{const e=Object(f.f)(),t=P(),a=t?"loggedIn":"loggedOut",n=["/signin","/signup"].includes(e.location.pathname);Object(s.useEffect)((()=>{(async()=>{if(n){if("loggedIn"===a)return void e.push("/profile/".concat(t.pk));if("loggedOut"===a)return}try{if(await g.a.post("/dj-rest-auth/token/refresh/"),"loggedIn"===a)return}catch(s){"loggedOut"===a&&e.push("/")}})()}),[e,a,t,n])};var T=a(129),z=a(83),U=a(135),H=a(130),E=a(84),D=a(131),M=a(16),W=a.n(M),q=a(18),J=a.n(q);var V=()=>{var e,t,a,n;L();const[c,o]=Object(s.useState)({username:"",password1:"",password2:""}),{username:r,password1:l,password2:d}=c,[j,u]=Object(s.useState)({}),b=Object(f.f)(),m=e=>{o({...c,[e.target.name]:e.target.value})};return Object(C.jsxs)(T.a,{className:W.a.Row,children:[Object(C.jsxs)(z.a,{className:"my-auto py-2 p-md-2",md:6,children:[Object(C.jsxs)(h.a,{className:"".concat(i.a.Content," p-4 "),children:[Object(C.jsx)("h1",{className:W.a.Header,children:"sign up"}),Object(C.jsxs)(U.a,{onSubmit:async e=>{e.preventDefault();try{await g.a.post("/dj-rest-auth/registration/",c),b.push("/signin")}catch(a){var t;u(null===(t=a.response)||void 0===t?void 0:t.data)}},children:[Object(C.jsxs)(U.a.Group,{controlId:"username",children:[Object(C.jsx)(U.a.Label,{className:"d-none",children:"username"}),Object(C.jsx)(U.a.Control,{className:W.a.Input,type:"text",placeholder:"Username",name:"username",value:r,onChange:m})]}),null===(e=j.username)||void 0===e?void 0:e.map(((e,t)=>Object(C.jsx)(H.a,{variant:"warning",children:e},t))),Object(C.jsxs)(U.a.Group,{controlId:"password1",children:[Object(C.jsx)(U.a.Label,{className:"d-none",children:"Password"}),Object(C.jsx)(U.a.Control,{className:W.a.Input,type:"password",placeholder:"Password",name:"password1",value:l,onChange:m})]}),null===(t=j.password1)||void 0===t?void 0:t.map(((e,t)=>Object(C.jsx)(H.a,{variant:"warning",children:e},t))),Object(C.jsxs)(U.a.Group,{controlId:"password2",children:[Object(C.jsx)(U.a.Label,{className:"d-none",children:"Confirm password"}),Object(C.jsx)(U.a.Control,{className:W.a.Input,type:"password",placeholder:"Confirm password",name:"password2",value:d,onChange:m})]}),null===(a=j.password2)||void 0===a?void 0:a.map(((e,t)=>Object(C.jsx)(H.a,{variant:"warning",children:e},t))),Object(C.jsx)(E.a,{className:"".concat(J.a.Button," ").concat(J.a.Wide," ").concat(J.a.Bright),type:"submit",children:"Sign up"}),null===(n=j.non_field_errors)||void 0===n?void 0:n.map(((e,t)=>Object(C.jsx)(H.a,{variant:"warning",className:"mt-3",children:e},t)))]})]}),Object(C.jsx)(h.a,{className:"mt-3 ".concat(i.a.Content),children:Object(C.jsxs)(O.b,{className:W.a.Link,to:"/signin",children:["Already have an account? ",Object(C.jsx)("span",{children:"Sign in"})]})})]}),Object(C.jsx)(z.a,{md:6,className:"my-auto d-none d-md-block p-2 ".concat(W.a.SignUpCol),children:Object(C.jsx)(D.a,{className:"".concat(i.a.FillerImage),src:"https://codeinstitute.s3.amazonaws.com/AdvancedReact/hero2.jpg"})})]})};var Q=function(){var e,t,a;const n=I();L();const[c,o]=Object(s.useState)({username:"",password:""}),{username:r,password:l}=c,[d,j]=Object(s.useState)({}),u=Object(f.f)(),b=e=>{o({...c,[e.target.name]:e.target.value})};return Object(C.jsxs)(T.a,{className:W.a.Row,children:[Object(C.jsxs)(z.a,{className:"my-auto p-0 p-md-2",md:6,children:[Object(C.jsxs)(h.a,{className:"".concat(i.a.Content," p-4 "),children:[Object(C.jsx)("h1",{className:W.a.Header,children:"sign in"}),Object(C.jsxs)(U.a,{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await g.a.post("/dj-rest-auth/login/",c);n(e.user),(e=>{const t=Object(w.a)(null===e||void 0===e?void 0:e.refresh_token).exp;localStorage.setItem("refreshTokenTimestamp",t)})(e),u.push("/profile/".concat(e.user.pk))}catch(a){var t;j(null===(t=a.response)||void 0===t?void 0:t.data)}},children:[Object(C.jsxs)(U.a.Group,{controlId:"username",children:[Object(C.jsx)(U.a.Label,{className:"d-none",children:"Username"}),Object(C.jsx)(U.a.Control,{type:"text",placeholder:"Username",name:"username",className:W.a.Input,value:r,onChange:b})]}),null===(e=d.username)||void 0===e?void 0:e.map(((e,t)=>Object(C.jsx)(H.a,{variant:"warning",children:e},t))),Object(C.jsxs)(U.a.Group,{controlId:"password",children:[Object(C.jsx)(U.a.Label,{className:"d-none",children:"Password"}),Object(C.jsx)(U.a.Control,{type:"password",placeholder:"Password",name:"password",className:W.a.Input,value:l,onChange:b})]}),null===(t=d.password)||void 0===t?void 0:t.map(((e,t)=>Object(C.jsx)(H.a,{variant:"warning",children:e},t))),Object(C.jsx)(E.a,{className:"".concat(J.a.Button," ").concat(J.a.Wide," ").concat(J.a.Bright),type:"submit",children:"Sign in"}),null===(a=d.non_field_errors)||void 0===a?void 0:a.map(((e,t)=>Object(C.jsx)(H.a,{variant:"warning",className:"mt-3",children:e},t)))]})]}),Object(C.jsx)(h.a,{className:"mt-3 ".concat(i.a.Content),children:Object(C.jsxs)(O.b,{className:W.a.Link,to:"/signup",children:["Don't have an account? ",Object(C.jsx)("span",{children:"Sign up now!"})]})})]}),Object(C.jsx)(z.a,{md:6,className:"my-auto d-none d-md-block p-2 ".concat(W.a.SignInCol),children:Object(C.jsx)(D.a,{className:"".concat(i.a.FillerImage),src:"https://codeinstitute.s3.amazonaws.com/AdvancedReact/hero.jpg"})})]})};const G="51c949a050b74ceba5688d10a1c7f5f1",K=(e=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(e)).reduce(((e,a)=>e+t[a%62]),"")})(64),Z=async()=>{const e=await(async e=>{const t=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",t)})(K);return t=e,btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var t};let Y;Y="https://we-rate-music-drf-1626129441d6.herokuapp.com/spotify-search";const X=()=>(Object(s.useEffect)((()=>{let e=new URLSearchParams(window.location.search).get("code");e&&(window.localStorage.setItem("code",e),(async e=>{let t=localStorage.getItem("code_verifier");const a={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:G,grant_type:"authorization_code",code:e,redirect_uri:Y,code_verifier:t})},s=await fetch("https://accounts.spotify.com/api/token",a),n=await s.json();n.access_token?localStorage.setItem("access_token",n.access_token):console.log("Error: ",n)})(e))}),[]),{handleAuthentication:async()=>{await(async()=>{const e=new URL("https://accounts.spotify.com/authorize");window.localStorage.setItem("code_verifier",K);const t=await Z(),a={response_type:"code",client_id:G,scope:"user-read-private user-read-email streaming",code_challenge_method:"S256",code_challenge:t,redirect_uri:Y};e.search=new URLSearchParams(a).toString(),window.location.href=e.toString()})()}}),$=Object(s.createContext)(),ee=Object(s.createContext)(),te=()=>Object(s.useContext)(ee),ae=e=>{let{children:t}=e;const[a,n]=Object(s.useState)("spotify:album:1VrravzsxruIeQf1cuE6zB");return Object(C.jsx)($.Provider,{value:a,children:Object(C.jsx)(ee.Provider,{value:n,children:t})})};var se=a(85);var ne=()=>Object(C.jsx)("div",{children:Object(C.jsx)(b.a,{icon:x.d,size:"2xl",spin:!0})}),ce=a(134),oe=a(48),re=a.n(oe);var ie=function(e){return Object(C.jsxs)(ce.a,{...e,size:"sm","aria-labelledby":"confirmation modal",centered:!0,children:[Object(C.jsx)(ce.a.Header,{className:re.a.Header,closeButton:!0,children:Object(C.jsx)(ce.a.Title,{id:"confirmation modal",className:re.a.Color,children:e.title})}),Object(C.jsx)(ce.a.Body,{className:re.a.Body,children:e.body}),Object(C.jsxs)(ce.a.Footer,{className:re.a.Footer,children:[Object(C.jsx)(E.a,{onClick:e.onHide,className:J.a.Button,children:"Close"}),Object(C.jsx)(E.a,{onClick:e.onConfirm,className:J.a.Button,children:"Confirm"})]})]})},le=a(67),de=a.n(le);var je=()=>{const e=I(),[t,a]=Object(s.useState)(!1),n=Object(f.f)();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(E.a,{onClick:()=>a(!0),className:de.a.Button,children:Object(C.jsx)(b.a,{className:de.a.FontAwesomeIcon,icon:x.a,size:"xl"})}),Object(C.jsx)(ie,{show:t,onHide:()=>a(!1),onConfirm:async()=>{try{await g.a.post("/dj-rest-auth/logout/"),e(null),y(),a(!1),n.push("/")}catch(t){console.log(t)}},title:"Sign out?",body:"Are you sure you want to sign out?"})]})},ue=a(27),he=a.n(ue),be=a(47),me=a.n(be);var xe=e=>{let{userId:t}=e;const a=P(),[n,c]=Object(s.useState)({}),[o,r]=Object(s.useState)(!1),[i,l]=Object(s.useState)(!1),d=Object(f.f)();Object(s.useEffect)((()=>{const e=g.a.CancelToken.source();return r(!1),(async()=>{try{const{data:a}=await _.get("profiles/".concat(t),{cancelToken:e.token});c(a),console.log("profiledata: ",a),l(!!a.following_id),r(!0)}catch(a){g.a.isCancel(a)?console.log("Request canceled",a.message):console.log(a)}})(),()=>{e.cancel("Request canceled")}}),[t]);return o?Object(C.jsxs)(h.a,{className:he.a.ProfileContainer,style:{backgroundImage:"url(".concat(n.background,")")},children:[Object(C.jsx)(h.a,{children:Object(C.jsxs)(T.a,{children:[Object(C.jsx)(z.a,{xs:3,children:Object(C.jsx)(b.a,{icon:x.b,size:"xl",className:he.a.FontAwesomeIcon,onClick:()=>d.goBack()})}),Object(C.jsx)(z.a,{xs:6,children:Object(C.jsx)("h2",{children:n.owner})}),Object(C.jsx)(z.a,{xs:3,children:Object(C.jsx)(je,{})})]})}),Object(C.jsx)(h.a,{className:he.a.StatsContainer,children:Object(C.jsxs)(T.a,{children:[Object(C.jsxs)(z.a,{xs:3,className:he.a.AvatarContainer,children:[Object(C.jsx)(E.a,{type:"link",className:he.a.TransparentButton,onClick:()=>d.push("/profile/".concat(n.id)),children:Object(C.jsx)(F,{src:n.image,height:100})}),a&&!(null!==n&&void 0!==n&&n.is_owner)&&(i?Object(C.jsx)(E.a,{className:he.a.TransparentButton,onClick:()=>(async e=>{try{const{data:t}=await v.delete("followers/".concat(e.following_id));console.log("handleUnfollow: ",t),c((e=>({...e,followers_count:e.followers_count-1}))),l(!1)}catch(t){console.log(t)}})(n),children:Object(C.jsx)(b.a,{icon:x.j,size:"xl",className:he.a.ProfileFontAwesomeIcon})}):!i&&Object(C.jsx)(E.a,{className:he.a.TransparentButton,onClick:()=>(async e=>{try{const{data:t}=await v.post("followers/",{followed:e.id});console.log("handleFollow: ",t),c((e=>({...e,followers_count:e.followers_count+1,following_id:t.id}))),l(!0)}catch(t){console.log(t)}})(n),children:Object(C.jsx)(b.a,{icon:se.a,size:"xl",className:he.a.ProfileFontAwesomeIcon})}))]}),Object(C.jsx)(z.a,{xs:9,children:Object(C.jsxs)(T.a,{children:[Object(C.jsxs)(z.a,{xs:4,children:[Object(C.jsx)("h3",{children:n.followers_count}),Object(C.jsx)("p",{children:"Followers"})]}),Object(C.jsxs)(z.a,{xs:4,children:[Object(C.jsx)("h3",{children:n.following_count}),Object(C.jsx)("p",{children:"Following"})]}),Object(C.jsxs)(z.a,{xs:4,children:[Object(C.jsx)("h3",{children:n.playlists_count}),Object(C.jsx)("p",{children:"Playlists"})]})]})})]})})]}):Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(h.a,{className:he.a.ProfileContainer,children:[Object(C.jsx)(h.a,{children:Object(C.jsx)(ne,{className:me.a.Centered})}),Object(C.jsx)(h.a,{className:he.a.StatsContainer,children:Object(C.jsx)(ne,{className:me.a.Centered})})]})})},Oe=a(133),pe=a(132),ge=a(62),_e=a.n(ge);var ve=function(e){let{onSearch:t,liveSearch:a=!1,data:n=null}=e;const[c,o]=Object(s.useState)(""),[r,i]=Object(s.useState)([]),[l,d]=Object(s.useState)(!1),j=Object(C.jsx)(Oe.a,{show:l,children:Object(C.jsx)(Oe.a.Menu,{className:_e.a.DropdownMenu,children:r.map((e=>Object(C.jsx)(Oe.a.Item,{className:_e.a.DropdownItem,children:Object(C.jsxs)(T.a,{children:[Object(C.jsx)(z.a,{xs:3,children:Object(C.jsx)("img",{src:e.image,alt:"".concat(e.title,"'s Cover Art"),className:_e.a.SearchResultImage})}),Object(C.jsx)(z.a,{xs:6,children:e.title}),Object(C.jsx)(z.a,{xs:3,children:Object(C.jsxs)("em",{children:["(",e.owner,"'s playlist)"]})})]})},e.id)))})});return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(U.a,{onSubmit:async e=>{e.preventDefault(),t(c)},children:Object(C.jsx)(U.a.Group,{controlId:"searchForm",children:Object(C.jsxs)(pe.a,{children:[Object(C.jsx)(U.a.Control,{type:"text",placeholder:"Search Spotify",onChange:e=>{const t=e.target.value;if(o(t),console.log(t),""!==t){if(console.log(e.target.value),a){const e=n.results.filter((e=>e.title.toLowerCase().includes(t.toLowerCase())||e.owner.toLowerCase().includes(t.toLowerCase())));i(e),d(e.length>0)}}else d(!1)}}),Object(C.jsx)(pe.a.Append,{children:a?Object(C.jsx)(E.a,{disabled:!0,className:J.a.Button,children:Object(C.jsx)(b.a,{icon:x.e,style:{color:"#3d3d3d"},size:"lg"})}):Object(C.jsx)(E.a,{type:"submit",className:J.a.Button,children:Object(C.jsx)(b.a,{icon:x.e,style:{color:"#3d3d3d"},size:"lg"})})})]})})}),a?j:null]})},fe=a(86),we=a.n(fe);var ye=e=>{let{image:t,title:a}=e;return Object(C.jsx)("img",{src:t||"https://res.cloudinary.com/dxgzepuov/image/upload/v1702896303/default_post_uq5gxz.jpg",className:we.a.Image,alt:"".concat(a,"'s cover art")})},Ce=a(87),Ne=a.n(Ce);var Se=function(e){var t;let{playlistData:a}=e;const n=P(),[c,o]=Object(s.useState)(!1),[r,i]=Object(s.useState)({}),[l,d]=Object(s.useState)(!1);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(E.a,{onClick:()=>o(!0),className:Ne.a.Button,children:Object(C.jsx)(b.a,{icon:x.i})}),l&&(null===r||void 0===r?void 0:r.message)&&Object(C.jsx)(H.a,{variant:"warning",onClose:()=>d(!1),dismissible:!0,children:r.message}),Object(C.jsx)(ie,{show:c,onHide:()=>o(!1),onConfirm:async e=>{var t;e.preventDefault();const s={spotify_id:a.id,title:a.name,image:null===(t=a.images[0])||void 0===t?void 0:t.url,url:a.external_urls.spotify,iframe_uri:a.uri,owner:n.id};try{const e=await v.post("playlists/",s);console.log(e),o(!1)}catch(r){var c;i({message:(null===(c=r.response)||void 0===c?void 0:c.data)||"Something went wrong! Please try again."}),d(!0)}},title:'Add "'.concat(a.name,'" to your profile?'),body:Object(C.jsx)(ye,{image:null===(t=a.images[0])||void 0===t?void 0:t.url,title:a.name})})]})},Pe=a(63),Ie=a.n(Pe);var ke=()=>{const{handleAuthentication:e}=X(),t=te(),a=P(),[n,c]=Object(s.useState)(),[o,r]=Object(s.useState)({}),[i,l]=Object(s.useState)(!1);L(),Object(s.useEffect)((()=>{const e=localStorage.getItem("lastSearch");console.log(e),e&&(c(JSON.parse(e)),console.log(JSON.parse(e)))}),[]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(xe,{userId:null===a||void 0===a?void 0:a.pk}),Object(C.jsxs)(h.a,{className:Ie.a.Container,children:[Object(C.jsx)(ve,{onSearch:async e=>{if(!e)return r({message:"Search field is empty"}),void l(!0);const t=new AbortController,a=t.signal;try{var s,n,o;const t=await fetch("https://api.spotify.com/v1/search?q=".concat(e,"&type=album%2Cplaylist%2Cartist&limit=50"),{headers:{Authorization:"Bearer "+localStorage.getItem("access_token")},signal:a}),r=await t.json(),i=[...(null===(s=r.albums)||void 0===s?void 0:s.items)||[],...(null===(n=r.playlists)||void 0===n?void 0:n.items)||[],...(null===(o=r.artists)||void 0===o?void 0:o.items)||[]];c(i),console.log(i),localStorage.setItem("lastSearch",JSON.stringify(i))}catch(d){var i;r({message:(null===(i=d.response)||void 0===i?void 0:i.data)||"An error occurred in fetching"}),l(!0)}return()=>{t.abort()}}}),i&&(null===o||void 0===o?void 0:o.message)&&Object(C.jsx)(H.a,{variant:"warning",onClose:()=>l(!1),dismissible:!0,children:o.message}),Object(C.jsx)(E.a,{onClick:e,children:"Authenticate"}),Object(C.jsx)(h.a,{children:Object(C.jsx)(T.a,{children:null===n||void 0===n?void 0:n.map((e=>{var a;return Object(C.jsxs)(z.a,{className:Ie.a.PaddingReset,xs:4,md:3,children:[Object(C.jsx)(E.a,{variant:"link",onClick:()=>{return a=e.uri,void t(a);var a},className:Ie.a.PaddingReset,children:Object(C.jsx)(ye,{image:null===(a=e.images[0])||void 0===a?void 0:a.url,title:e.name})}),Object(C.jsx)(T.a,{children:Object(C.jsxs)(z.a,{children:[Object(C.jsxs)("span",{children:[e.name," "]}),Object(C.jsx)("span",{children:Object(C.jsx)(Se,{playlistData:e})})]})})]},e.id)}))})})]})]})},Ae=a(43),Be=a.n(Ae),Fe=a(138),Re=a(139);var Le=function(){const e=Object(s.useRef)(),t=Object(s.useContext)($),[a,n]=Object(s.useState)(null);return Object(s.useEffect)((()=>{const a=document.createElement("script");a.src="https://open.spotify.com/embed/iframe-api/v1",a.async=!0,document.body.appendChild(a),window.onSpotifyIframeApiReady=a=>{const s={width:"100%",height:"352px",uri:t};a.createController(e.current,s,(e=>{n(e)}))}}),[t]),Object(s.useEffect)((()=>{a&&a.loadUri(t)}),[t,a]),Object(C.jsx)("div",{ref:e})};var Te=function(){return Object(C.jsx)(Fe.a,{className:Be.a.AccordionPosition,children:Object(C.jsxs)(Re.a,{className:Be.a.Card,children:[Object(C.jsx)(Re.a.Header,{className:Be.a.Header,children:Object(C.jsx)(Fe.a.Toggle,{as:E.a,variant:"link",eventKey:"0",className:Be.a.PaddingReset,children:Object(C.jsx)(b.a,{icon:x.c})})}),Object(C.jsx)(Fe.a.Collapse,{eventKey:"0",children:Object(C.jsx)(Re.a.Body,{className:Be.a.PaddingReset,children:Object(C.jsx)(Le,{})})})]})})},ze=a(88),Ue=a(49),He=a.n(Ue);var Ee=e=>{let{filter:t="",profileView:a=!1}=e;const[n,c]=Object(s.useState)([]),[o,r]=Object(s.useState)(!1),l=Object(f.f)();return L(),Object(s.useEffect)((()=>{const e=g.a.CancelToken.source();console.log("PlaylistsPage rendered");return r(!1),(async()=>{try{const{data:a}=await _.get("playlists/?".concat(t),{cancelToken:e.token});c(a),console.log("playlist data: ",a),r(!0)}catch(a){g.a.isCancel(a)?console.log("Request canceled",a.message):console.log(a)}})(),()=>{e.cancel("Request canceled")}}),[t]),o?Object(C.jsxs)(h.a,{className:a?He.a.ProfileContainer:He.a.Container,children:[a?null:Object(C.jsx)(ve,{liveSearch:!0,data:n}),Object(C.jsx)(ze.a,{dataLength:n.results.length,loader:Object(C.jsx)(ne,{}),hasMore:!!n.next,next:()=>(async(e,t)=>{try{const{data:a}=await _.get(e.next);t((e=>({...e,next:a.next,results:a.results.reduce(((e,t)=>e.some((e=>e.id===t.id))?e:[...e,t]),e.results)})))}catch(a){console.log(a)}})(n,c),className:He.a.InfiniteScroll,children:Object(C.jsx)(T.a,{children:n.results.map((e=>Object(C.jsx)(z.a,{className:i.a.PaddingReset,xs:4,md:3,children:Object(C.jsx)(E.a,{variant:"link",onClick:()=>l.push("/playlist/".concat(e.id)),className:He.a.Button,children:Object(C.jsx)(ye,{image:e.image,title:e.title})})},e.id)))})})]}):Object(C.jsx)(ne,{className:me.a.Centered})};var De=()=>{const{userId:e}=Object(f.g)();return L(),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(xe,{userId:e}),Object(C.jsx)(Ee,{filter:"owner__profile=".concat(e),profileView:!0})]})},Me=a(68);a(124);var We=e=>{let{playlist:t}=e;const[a,n]=Object(s.useState)(0);console.log(t),Object(s.useEffect)((()=>{(async()=>{if(t.rating_id)try{const{data:e}=await v.get("ratings/".concat(t.rating_id));n(e.score),console.log("rating data: ",e)}catch(e){console.log(e)}})()}),[t]);const c={itemShapes:Me.StickerStar,activeFillColor:"#df604e",inactiveFillColor:"#df5f4e6e"};return Object(C.jsx)(Me.Rating,{value:a,onChange:async e=>{if(t.rating_id)try{await _.put("ratings/".concat(t.rating_id),{score:e}),n(e)}catch(a){console.log(a)}else try{await _.post("ratings/",{playlist:t.id,score:e}),n(e)}catch(a){console.log(a)}},style:{maxWidth:250},itemStyles:c,items:5})},qe=a(69),Je=a.n(qe);var Ve=()=>{const{id:e}=Object(f.g)(),[t,a]=Object(s.useState)([]),[n,c]=Object(s.useState)([]),o=(te(),Object(f.f)());L(),Object(s.useEffect)((()=>{(async()=>{try{const[{data:t},{data:s}]=await Promise.all([_.get("playlists/".concat(e)),_.get("ratings/?playlist=".concat(e))]);a(t),c(s),console.log(t),console.log(s)}catch(t){console.log(t)}})()}),[e]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(xe,{userId:t.owner_id}),Object(C.jsxs)(h.a,{className:Je.a.Container,children:[Object(C.jsxs)(T.a,{children:[Object(C.jsx)(z.a,{xs:4,children:Object(C.jsx)(E.a,{variant:"link",onClick:()=>o.goBack(),className:Je.a.Button,children:Object(C.jsx)(ye,{image:t.image,title:t.title})})}),Object(C.jsxs)(z.a,{xs:8,children:[Object(C.jsx)(T.a,{children:Object(C.jsx)(z.a,{children:Object(C.jsx)("h5",{children:t.title})})}),Object(C.jsxs)(T.a,{children:[Object(C.jsxs)(z.a,{xs:6,children:[Object(C.jsx)("h6",{children:"Average Rating"}),Object(C.jsx)("p",{children:t.average_rating||"0"})]}),Object(C.jsxs)(z.a,{xs:6,children:[Object(C.jsx)("h6",{children:"# of Ratings"}),Object(C.jsx)("p",{children:t.ratings_count})]})]})]})]}),Object(C.jsx)(We,{playlist:t})]})]})};var Qe=function(){const e=P(),t=(null===e||void 0===e?void 0:e.pk)||"";return Object(C.jsxs)("div",{className:i.a.App,children:[Object(C.jsx)(R,{}),Object(C.jsx)(Te,{}),Object(C.jsxs)(f.c,{children:[Object(C.jsx)(f.a,{exact:!0,path:"/",render:()=>Object(C.jsx)("h1",{children:"Home Page"})}),Object(C.jsx)(f.a,{exact:!0,path:"/signin",render:()=>Object(C.jsx)(Q,{})}),Object(C.jsx)(f.a,{exact:!0,path:"/signup",render:()=>Object(C.jsx)(V,{})}),Object(C.jsx)(f.a,{exact:!0,path:"/profile/:userId",render:()=>Object(C.jsx)(De,{})}),Object(C.jsx)(f.a,{exact:!0,path:"/popular",render:()=>Object(C.jsx)(Ee,{filter:"ratings__owner__profile=".concat(t)})}),Object(C.jsx)(f.a,{exact:!0,path:"/playlist/:id",render:()=>Object(C.jsx)(Ve,{})}),Object(C.jsx)(f.a,{exact:!0,path:"/feed",render:()=>Object(C.jsx)(Ee,{filter:"owner__followed_by__owner__profile=".concat(t)})}),Object(C.jsx)(f.a,{exact:!0,path:"/spotify-search",render:()=>Object(C.jsx)(ke,{})}),Object(C.jsx)(f.a,{exact:!0,path:"/placeholder",render:()=>Object(C.jsx)("h1",{children:"Placeholder"})}),Object(C.jsx)(f.a,{render:()=>Object(C.jsx)("h1",{children:"Page Not Found!"})})]})]})};var Ge=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,140)).then((t=>{let{getCLS:a,getFID:s,getFCP:n,getLCP:c,getTTFB:o}=t;a(e),s(e),n(e),c(e),o(e)}))};o.a.render(Object(C.jsx)(n.a.StrictMode,{children:Object(C.jsx)(k,{children:Object(C.jsx)(ae,{children:Object(C.jsx)(O.a,{children:Object(C.jsx)(Qe,{})})})})}),document.getElementById("root")),Ge()},16:function(e,t,a){e.exports={Row:"SignInUpForm_Row__3PbVy",Input:"SignInUpForm_Input__3xaLZ",Header:"SignInUpForm_Header__3joQJ",Link:"SignInUpForm_Link__1BeMm",SignUpCol:"SignInUpForm_SignUpCol__28o4y",SignInCol:"SignInUpForm_SignInCol__3ImPK"}},18:function(e,t,a){e.exports={Button:"Button_Button__27i9m",Wide:"Button_Wide__2ScDr",PaddingReset:"Button_PaddingReset__3EaQQ"}},20:function(e,t,a){e.exports={CustomBackground:"NavBar_CustomBackground__3zgb5",NavLink:"NavBar_NavLink__34ons",Active:"NavBar_Active__3PBZb"}},25:function(e,t,a){e.exports={App:"App_App__16ZpL",Content:"App_Content__ZaMNr",FillerImage:"App_FillerImage__2ob-g",PaddingReset:"App_PaddingReset__2Yixf"}},27:function(e,t,a){e.exports={ProfileContainer:"Profile_ProfileContainer__1MhJH",AvatarContainer:"Profile_AvatarContainer__314Ah",FontAwesomeIcon:"Profile_FontAwesomeIcon__1XfKb",ProfileFontAwesomeIcon:"Profile_ProfileFontAwesomeIcon__1_PY0",StatsContainer:"Profile_StatsContainer__1jyTN",TransparentButton:"Profile_TransparentButton__27vlY"}},43:function(e,t,a){e.exports={AccordionPosition:"AccordionWindow_AccordionPosition__3Pg_2",Header:"AccordionWindow_Header__3EVT_",Card:"AccordionWindow_Card__RFCw5",PaddingReset:"AccordionWindow_PaddingReset__RMqnf"}},47:function(e,t,a){e.exports={Centered:"LoadingSpinner_Centered__2UoRO"}},48:function(e,t,a){e.exports={Header:"ModalWindow_Header__hiHjJ",Body:"ModalWindow_Body__13Mmm",Color:"ModalWindow_Color__9jnUe",Footer:"ModalWindow_Footer__3oRO7"}},49:function(e,t,a){e.exports={Container:"PlaylistsPage_Container__KgRlF",ProfileContainer:"PlaylistsPage_ProfileContainer__1ky5y",Button:"PlaylistsPage_Button__2jYpK",InfiniteScroll:"PlaylistsPage_InfiniteScroll__1cMqB"}},62:function(e,t,a){e.exports={DropdownMenu:"SearchBar_DropdownMenu__2J2wk",DropdownItem:"SearchBar_DropdownItem__3uVVu",SearchResultImage:"SearchBar_SearchResultImage__Xzg38"}},63:function(e,t,a){e.exports={Container:"SpotifySearchPage_Container__31uhH",PaddingReset:"SpotifySearchPage_PaddingReset__2gaVg"}},67:function(e,t,a){e.exports={FontAwesomeIcon:"SignOutButton_FontAwesomeIcon__WBpEv",Button:"SignOutButton_Button__1D41d"}},69:function(e,t,a){e.exports={Container:"PlaylistDetail_Container__37TnQ",Button:"PlaylistDetail_Button__3EF93"}},81:function(e,t,a){e.exports={Avatar:"Avatar_Avatar__196lW"}},86:function(e,t,a){e.exports={Image:"Playlist_Image__2QZQC"}},87:function(e,t,a){e.exports={Button:"AddPlaylistButton_Button__19nCc"}},93:function(e,t,a){}},[[125,1,2]]]);
//# sourceMappingURL=main.ab748040.chunk.js.map